create deployement and service

        kubectl apply -f https://k8s.io/examples/application/php-apache.yaml
install metrics server
       
       kubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml

       check if metrics-server is installed or not
       kubectl get pods -n kube-system

           if not
            kubectl edit deploy metrics-server -n kube-system 
       
           Add  --kubelet-insecure-tls as below

                spec:
                containers:
                - args:
                    - --kubelet-insecure-tls

create hpa for a deployment

            kubectl autoscale deployment php-apache --cpu-percent=50 --min=1 --max=10
            
            to veiw hpa file 
            
                kubectl edit hpa php-apache

test the application


            kubectl run -i --tty load-generator --rm --image=busybox:1.28 --restart=Never -- /bin/sh -c "while sleep 0.01; do wget -q -O- http://php-apache; done"


            kubectl get hpa php-apache --watch